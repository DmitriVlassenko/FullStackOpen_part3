(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t.n(c),a=t(14),s=t.n(a),u=(t(19),t(3)),o=(t(20),t(4)),i=t.n(o),d="/api/persons",l={getAll:function(){return i.a.get(d).then((function(e){return e.data}))},create:function(e){return i.a.post(d,e).then((function(e){return e.data}))},update:function(e,n){return i.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},deletePerson:function(e){return i.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},b=t(0),j=function(e){var n=e.person,t=e.persons,c=e.setPersons,r=e.setMessage;return Object(b.jsxs)("li",{children:[n.name," ",n.number,Object(b.jsx)("button",{type:"button",onClick:function(){return e=n.id,void(window.confirm("Are you sure you want to delete ".concat(n.name," ?"))&&l.deletePerson(e).then((function(){c(t.filter((function(n){return n.id!==e})))})).catch((function(e){r("".concat(n.name," was already deleted"))})));var e},children:"X"})]})},h=function(e){var n=e.persons,t=e.setPersons,c=e.setMessage;return Object(b.jsx)("div",{children:Object(b.jsx)("ul",{children:n.map((function(e){return Object(b.jsx)(j,{person:e,persons:n,setPersons:t,setMessage:c},e.name)}))})})},m=function(e){return Object(b.jsx)("div",{children:Object(b.jsxs)("h3",{children:["filter shown with",Object(b.jsx)("input",{type:"text",placeholder:"search",value:e.search,onChange:e.inputFilter})]})})},f=function(e){return Object(b.jsx)("div",{children:Object(b.jsxs)("form",{onSubmit:e.addName,children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{value:e.newName,onChange:e.nameChange})]}),Object(b.jsxs)("div",{children:["number: ",Object(b.jsx)("input",{value:e.number,onChange:e.phoneNumber})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})})},p=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),s=Object(u.a)(a,2),o=s[0],i=s[1],d=Object(c.useState)(""),j=Object(u.a)(d,2),p=j[0],O=j[1],x=Object(c.useState)(""),v=Object(u.a)(x,2),g=v[0],w=v[1],y=Object(c.useState)(null),N=Object(u.a)(y,2),S=N[0],k=N[1],C=""===g?t:t.filter((function(e){return e.name.toLowerCase().includes(g.toLowerCase())||e.number.includes(g)}));Object(c.useEffect)((function(){l.getAll().then((function(e){return r(e)}))}),[]);var P=function(e){var n=e.message;return null===n?null:(setTimeout((function(){k(null)}),5e3),n.includes("deleted")?Object(b.jsx)("div",{className:"badError",children:n}):Object(b.jsx)("div",{className:"success",children:n}))};return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(P,{message:S}),Object(b.jsx)(m,{search:g,inputFilter:function(e){w(e.target.value)}}),Object(b.jsx)("h3",{children:"add a new"}),Object(b.jsx)(f,{addName:function(e){e.preventDefault();var n={name:o,number:p,date:(new Date).toISOString(),id:t.length+1},c=t.find((function(e){return e.name===n.name}));c?window.confirm("".concat(n.name," is already added to phonebook, replace the old number with a new one ?"))&&l.update(c.id,n).then((function(e){r(t.map((function(n){return n.id===c.id?e:n}))),i(""),O(""),k("".concat(n.name," successfully changed"))})):t.find((function(e){return e.number===n.number}))?(alert("".concat(n.number," is already added to phonebook")),O("")):n.name&&n.number?l.create(n).then((function(){r(t.concat(n)),i(""),O(""),k("Added ".concat(n.name))})):alert("Fill name and phone number please")},newName:o,number:p,nameChange:function(e){i(e.target.value)},phoneNumber:function(e){O(e.target.value)}}),Object(b.jsx)("h3",{children:"Numbers"}),Object(b.jsx)(h,{persons:C,setPersons:r,setMessage:k})]})};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.14a5ac6f.chunk.js.map